(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[11],{"0724":function(e,t,s){"use strict";s("ff9b")},"59a5":function(e,t,s){"use strict";s("98bf")},8551:function(e,t,s){"use strict";s("8d8f")},"8d8f":function(e,t,s){},"98bf":function(e,t,s){},ab38:function(e,t,s){"use strict";s.r(t);var o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"q-pa-md "},[s("div",{staticClass:"bg-grey-3 rounded-borders q-pa-md q-mx-auto  ",class:{"bg-grey-9":e.$q.dark.isActive},staticStyle:{"max-width":"900px"}},[s("div",{staticClass:"row items-center justify-around"},[s("select-image"),s("div",{staticClass:" q-ma-md",staticStyle:{"border-radius":"50%"}},[s("lottie-vue-player",{staticStyle:{width:"300px"},attrs:{src:"https://assets6.lottiefiles.com/packages/lf20_7ovs9for.json"}})],1)],1)]),s("feed-back")],1)},a=[],n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"column items-center"},[s("div",{staticClass:"q-pb-sm box",staticStyle:{"max-width":"330px"}},[s("p",{staticClass:"text-text-subtitle2 q-mb-xs"},[e._v("Envie as seguintes fotos do RG:")]),e._m(0),s("q-icon",{directives:[{name:"show",rawName:"v-show",value:e.frente,expression:"frente"}],staticStyle:{float:"right"},attrs:{name:"check",size:"md",color:"purple"}}),s("q-file",{staticStyle:{width:"250px"},attrs:{filled:"",disable:e.enviado&&!e.reject_frente,color:"purple",label:"Frente",accept:".jpg, .jpeg,.webp, .png. .pdf"},scopedSlots:e._u([{key:"prepend",fn:function(){return[s("q-icon",{attrs:{name:"image"}})]},proxy:!0},{key:"append",fn:function(){return[s("q-icon",{staticClass:"cursor-pointer",attrs:{name:"close"},on:{click:function(t){t.stopPropagation(),e.frente=null}}})]},proxy:!0}]),model:{value:e.frente,callback:function(t){e.frente=t},expression:"frente"}})],1),s("div",{staticClass:"q-pb-sm box",staticStyle:{"max-width":"330px"}},[e.verso?s("q-icon",{staticStyle:{float:"right"},attrs:{name:"check",size:"md",color:"purple"}}):e._e(),s("div",{staticClass:"row items-center justify-between",staticStyle:{"max-width":"320px"}},[s("q-file",{staticStyle:{width:"250px"},attrs:{filled:"",disable:e.enviado&&!e.reject_verso,color:"purple",label:"Verso",accept:".jpg, .jpeg,.webp, .png, .pdf"},scopedSlots:e._u([{key:"prepend",fn:function(){return[s("q-icon",{attrs:{name:"image"}})]},proxy:!0},{key:"append",fn:function(){return[s("q-icon",{staticClass:"cursor-pointer",attrs:{name:"close"},on:{click:function(t){t.stopPropagation(),e.verso=null}}})]},proxy:!0}]),model:{value:e.verso,callback:function(t){e.verso=t},expression:"verso"}})],1)],1),s("div",{staticClass:"q-pb-sm box",staticStyle:{"max-width":"330px"}},[e.segurando?s("q-icon",{staticStyle:{float:"right"},attrs:{name:"check",size:"md",color:"purple"}}):e._e(),s("div",{staticClass:"row items-center justify-between",staticStyle:{"max-width":"320px"}},[s("q-file",{staticStyle:{width:"250px"},attrs:{filled:"",disable:e.enviado&&!e.reject_segurando,color:"purple",label:"Segurando",accept:".jpg, .jpeg,.webp, .png, .pdf"},scopedSlots:e._u([{key:"prepend",fn:function(){return[s("q-icon",{attrs:{name:"image"}})]},proxy:!0},{key:"append",fn:function(){return[s("q-icon",{staticClass:"cursor-pointer",attrs:{name:"close"},on:{click:function(t){t.stopPropagation(),e.segurando=null}}})]},proxy:!0}]),model:{value:e.segurando,callback:function(t){e.segurando=t},expression:"segurando"}})],1)],1),e.reject_frente||e.reject_verso||e.reject_segurando?e._e():s("q-btn",{staticClass:"q-pt-sm",staticStyle:{width:"100%"},attrs:{disable:!e.frente||!e.verso||!e.segurando||e.enviado,label:"Enviar","icon-right":"send",color:"purple"},on:{click:function(t){return e.sendDocs(e.frente,e.verso,e.segurando)}}}),s("div",{staticClass:"row",staticStyle:{width:"250px"}},[e.reject_frente?s("q-btn",{staticClass:"q-mb-sm",staticStyle:{width:"100%"},attrs:{disable:!e.frente,label:"reenviar frente","icon-right":"send",color:"purple"},on:{click:function(t){return e.resendDocFrente(e.frente)}}}):e._e(),e.reject_verso?s("q-btn",{staticStyle:{width:"100%"},attrs:{disable:!e.verso,label:"reenviar verso","icon-right":"send",color:"purple"},on:{click:function(t){return e.resendDocVerso(e.verso)}}}):e._e(),e.reject_segurando?s("q-btn",{staticClass:"q-mt-sm",staticStyle:{width:"100%"},attrs:{disable:!e.segurando,label:"reenviar segurando","icon-right":"send",color:"purple"},on:{click:function(t){return e.resendDocSegu(e.segurando)}}}):e._e()],1),s("div",{staticClass:"column items-center justify-center",staticStyle:{height:"120px"}},[e.showLoading?s("q-spinner-hourglass",{attrs:{color:"purple",size:"4em"}}):e._e(),e.showLoading?s("p",{staticClass:"q-ma-none"},[e._v("Aguarde...")]):e._e()],1)],1)},r=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("p",[e._v("\n      Formatos aceitos:\n      "),s("i",{staticClass:"text-purple-4 text-bold"},[e._v(".jpg, .png, .pdf ")])])}],i=s("ded3"),c=s.n(i),d=(s("e6cf"),s("260b")),l=(s("588e"),s("e71f"),s("1732"),s("2f62"));const u=d["a"].firestore();var p={data(){return{frente:null,verso:null,segurando:null,enviado:!1,showLoading:!1}},computed:c()({},Object(l["d"])({userUid:e=>e.acompanhantes.userId,reject_frente:e=>e.documentos.reject_frente,reject_verso:e=>e.documentos.reject_verso,reject_segurando:e=>e.documentos.reject_segurando})),created(){u.collection("acompanhante").doc(this.userUid).get().then((e=>{let t=e.data().documentos;"enviado"==t||"aprovado"==t?this.enviado=!0:"rejeitado"!=t&&null!=t||(this.enviado=!1)}))},methods:c()(c()({},Object(l["b"])({resendDocFrente:"documentos/resendDocFrente",resendDocVerso:"documentos/resendDocVerso",resendDocSegu:"documentos/resendDocSegu"})),{},{sendDocs(e,t,s){this.showLoading=!0;let o=this.userUid,a=this.$firebase.storage().ref().child(`docs/rg/frente/${o}`),n=this.$firebase.storage().ref().child(`docs/rg/verso/${o}`),r=this.$firebase.storage().ref().child(`docs/rg/segurando/${o}`);const i=async()=>{await a.getDownloadURL().then((e=>{u.collection("operacional").doc("documentos").collection("acompanhantes").doc(o).set({im_frente:e,doc_frente:"novo"},{merge:!0})}))},c=async()=>{await n.getDownloadURL().then((e=>{u.collection("operacional").doc("documentos").collection("acompanhantes").doc(o).set({im_verso:e,doc_verso:"novo"},{merge:!0})}))},d=async()=>{await r.getDownloadURL().then((e=>{u.collection("operacional").doc("documentos").collection("acompanhantes").doc(o).set({im_segurando:e,doc_segurando:"novo"},{merge:!0})}))};function l(){u.collection("acompanhante").doc(o).set({documentos:"enviado"},{merge:!0})}a.put(e).then((()=>{i(),n.put(t).then((()=>{c(),r.put(s).then((()=>{d(),l(),this.enviado=!0,this.showLoading=!1,this.$q.notify({type:"positive",message:"Seus documentos foram enviados para analise com sucesso"}),setTimeout((()=>{this.$q.notify({type:"info",message:"Enviaremos por email se seus documentos foram aprovados"})}),1500),u.collection("acompanhante").doc(this.userUid).get().then((e=>{u.collection("operacional").doc("documentos").collection("acompanhantes").doc(this.userUid).set({no_acompanhante:e.data().no_acompanhante,no_artistico:e.data().no_artistico,nu_cpf:null,nu_rg:null,im_perfil:e.data().im_perfil,doc_status:"novo"},{merge:!0})})),setTimeout((()=>{location.reload()}),8e3)}))}))}))}})},m=p,v=(s("8551"),s("2877")),_=s("0016"),f=s("7d53"),g=s("9c40"),h=s("9149"),b=s("eebe"),x=s.n(b),j=Object(v["a"])(m,n,r,!1,null,null,null),w=j.exports;x()(j,"components",{QIcon:_["a"],QFile:f["a"],QBtn:g["a"],QSpinnerHourglass:h["a"]});var y=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{directives:[{name:"viewer",rawName:"v-viewer"}],staticClass:"bg-grey-3 rounded-borders q-pa-lg q-mx-auto q-mt-md   ",class:{"bg-grey-9":e.$q.dark.isActive},staticStyle:{"max-width":"900px"}},[s("div",{staticClass:"row items-center  "},[s("pre",{staticClass:"text-h6 q-ma-none q-mb-md"},[e._v("Status: ")]),s("p",{staticClass:" text-h6  text-bold q-ma-none q-mb-md",class:{"text-purple-3":"Não enviado(s)"==e.statusAll,"text-info":"Em análise"==e.statusAll,"text-green-14":"Aprovados"==e.statusAll,"text-red-5":"Rejeitado(s)"==e.statusAll}},[e._v("\n      "+e._s(e.statusAll)+"\n    ")])]),s("div",[s("div",{staticClass:"q-mb-lg  box_doc"},[s("div",[s("p",{staticClass:"q-mb-sm",staticStyle:{width:"320px"}},["Não enviado(s)"!=e.statusAll?s("span",{staticClass:"text-bold",class:{"text-purple-3":"nao enviado"==e.status_f,"text-info":"novo"==e.status_f,"text-green-14":"aprovado"==e.status_f,"text-red-5":"rejeitado"==e.status_f}},[e._v("\n            RG_frente\n          ")]):e._e(),e._v("\n          "+e._s(e.msg_frente)+"\n        ")]),s("img",{staticClass:"d-block border-radius doc_img  ",attrs:{src:e.url_doc_frente,"spinner-color":"purple"}})])]),s("div",{staticClass:"q-mb-lg  box_doc"},[s("div",[s("p",{staticClass:"q-mb-sm",staticStyle:{width:"320px"}},["Não enviado(s)"!=e.statusAll?s("span",{staticClass:"text-bold",class:{"text-purple-3":"nao enviado"==e.status_v,"text-info":"novo"==e.status_v,"text-green-14":"aprovado"==e.status_v,"text-red-5":"rejeitado"==e.status_v}},[e._v("\n            RG_verso\n          ")]):e._e(),e._v("\n          "+e._s(e.msg_verso)+"\n        ")]),s("img",{staticClass:"d-block  doc_img  ",attrs:{src:e.url_doc_verso,"spinner-color":"purple"}})])]),s("div",{staticClass:"q-mb-lg box_doc"},[s("div",[s("p",{staticClass:"q-mb-sm",staticStyle:{width:"320px"}},["Não enviado(s)"!=e.statusAll?s("span",{staticClass:"text-bold",class:{"text-purple-3":"nao enviado"==e.status_s,"text-info":"novo"==e.status_s,"text-green-14":"aprovado"==e.status_s,"text-red-5":"rejeitado"==e.status_s}},[e._v("\n            Rg_segurando\n          ")]):e._e(),e._v("\n          "+e._s(e.msg_segurando)+"\n        ")]),s("img",{staticClass:"d-blockborder-radius doc_img  ",attrs:{src:e.url_doc_segurando,"spinner-color":"purple"}})])])])])},q=[];const S=d["a"].firestore();var C={computed:c()({},Object(l["d"])({userUid:e=>e.acompanhantes.userId})),created(){this.verification(),this.getPhotosDoc()},data(){return{msg_frente:"",msg_verso:"",msg_segurando:"",status_f:"",status_v:"",status_s:"",statusAll:"",url_doc_frente:null,url_doc_verso:null,url_doc_segurando:null}},methods:c()(c()({},Object(l["c"])({rejectFrente:"documentos/updateStatusRejectFrente",rejectVerso:"documentos/updateStatusRejectVerso",rejectSegurando:"documentos/updateStatusRejectSegurando",updateStatusAll:"documentos/updateStatusAll",getPhotosDoc(){S.collection("operacional").doc("documentos").collection("acompanhantes").doc(this.userUid).get().then((e=>{this.url_doc_frente=e.data().im_frente,this.url_doc_verso=e.data().im_verso,this.url_doc_segurando=e.data().im_segurando}))}})),{},{verification(){this.$firebase.firestore().collection("operacional").doc("documentos").collection("acompanhantes").doc(this.userUid).get().then((e=>{console.log(e.data());const t=e.data().doc_frente,s=e.data().doc_verso,o=e.data().doc_segurando;"rejeitado"==t?(this.status_f=t,this.rejectFrente(!0),this.msg_frente=`foi rejeitado pelo motivo: "${e.data().motivo_frente}".`):"novo"==t?(this.status_f=t,this.msg_frente=" esta sendo averiguado, aguarde. "):"aprovado"==t?(this.status_f=t,this.msg_frente="foi verificado e aprovado."):this.status_f="nao enviado","rejeitado"==s?(this.status_v=s,this.rejectVerso(!0),this.msg_verso=`foi rejeitado pelo motivo: "${e.data().motivo_verso}".`):"novo"==s?(this.status_v=s,this.msg_verso=" esta sendo averiguado, aguarde. "):"aprovado"==s?(this.status_v=s,this.msg_verso="foi verificado e aprovado."):this.status_v="nao enviado","rejeitado"==o?(this.status_s=o,this.rejectSegurando(!0),this.msg_segurando=`foi rejeitado pelo motivo: "${e.data().motivo_segurando}".`):"novo"==o?(this.status_s=o,this.msg_segurando=" esta sendo averiguado, aguarde. "):"aprovado"==o?(this.status_s=o,this.msg_segurando="foi verificado e aprovado."):this.status_s="nao enviado"}))}})},k=C,$=(s("0724"),Object(v["a"])(k,y,q,!1,null,"28492b99",null)),D=$.exports,A={components:{SelectImage:w,FeedBack:D}},R=A,U=(s("59a5"),Object(v["a"])(R,o,a,!1,null,"153d2749",null));t["default"]=U.exports},ff9b:function(e,t,s){}}]);