(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[16],{"062e":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("q-dialog",{attrs:{value:e.isOpen,persistent:""},on:{hide:function(t){return e.$emit("hide")},show:e.setInfo}},[i("q-card",[i("q-form",{ref:"myForm",on:{submit:function(t){return t.preventDefault(),e.updateExperience(t)}}},[i("q-card-section",[i("div",{staticClass:"text-h6"},[e._v("Adicione o novo depoimento")])]),i("q-card-section",{staticClass:"q-pt-none scroll",staticStyle:{"max-height":"70vh"}},[i("div",{staticClass:"row q-col-gutter-md"},[i("div",{staticClass:"col-12"},[i("q-input",{attrs:{color:"purple",label:"Nome",filled:"",rules:[function(e){return 0!==e.length||"Nome é obrigatório"}]},model:{value:e.no_cliente,callback:function(t){e.no_cliente=t},expression:"no_cliente"}})],1),i("div",{staticClass:"col-12"},[i("vue-tel-input",{attrs:{mode:"international",defaultCountry:"br",validCharactersOnly:!0,styleClasses:["wrapper",{"wrapper--dark":this.$q.dark.isActive},{"vti__dropdown-list--dark":this.$q.dark.isActive}],inputOptions:{placeholder:"Digite seu número de telefone",maxlength:20,required:!1,type:"tel"}},model:{value:e.nu_telefone,callback:function(t){e.nu_telefone=t},expression:"nu_telefone"}}),i("span",{staticClass:"errorLabel",class:{errorInputPhone:e.showInputPhoneError}},[e._v("\n              Campo obrigatório\n            ")])],1),i("div",{staticClass:"col-12"},[i("q-input",{attrs:{color:"purple",label:"menssagem",maxlength:"500",filled:"",autogrow:"",rules:[function(e){return 0!==e.length||"Nome é obrigatório"}]},model:{value:e.ds_experiencia,callback:function(t){e.ds_experiencia=t},expression:"ds_experiencia"}})],1),i("div",{staticClass:"col-12"},[i("q-input",{staticClass:"cursor-pointer",attrs:{filled:"",color:"purple",readonly:"",rules:[function(e){return!!e||"Campo obrigatório"}]},scopedSlots:e._u([{key:"append",fn:function(){return[i("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}})]},proxy:!0}]),model:{value:e.dt_experiencia,callback:function(t){e.dt_experiencia=t},expression:"dt_experiencia"}},[i("q-popup-proxy",{ref:"qDateProxy",attrs:{"transition-show":"scale","transition-hide":"scale"}},[i("q-date",{attrs:{color:"purple",mask:"DD/MM/YYYY"},model:{value:e.dt_experiencia,callback:function(t){e.dt_experiencia=t},expression:"dt_experiencia"}},[i("div",{staticClass:"row items-center justify-end"},[i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Fechar",color:"purple",flat:""}})],1)])],1)],1)],1),i("div",{staticClass:"col-12"},e._l(e.cm_etiquetas,(function(t,n){return i("q-toggle",{key:n,attrs:{label:t.br,color:e.getColor(t)},model:{value:t.value,callback:function(i){e.$set(t,"value",i)},expression:"label.value"}})})),1),i("div",{staticClass:"col-12"},[i("q-rating",{attrs:{size:"2em",max:5,color:"yellow-9"},model:{value:e.qt_estrelas,callback:function(t){e.qt_estrelas=t},expression:"qt_estrelas"}})],1)])]),i("q-separator"),i("q-card-actions",{attrs:{align:"right"}},[i("q-btn",{attrs:{flat:"",label:"Salvar",color:"purple",type:"submit"}}),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Fechar",color:"red"}})],1)],1)],1)],1)},a=[],s=i("ded3"),r=i.n(s),c=(i("5319"),i("2f62")),o={props:{isOpen:{type:Boolean,required:!0},index:{type:Number,required:!0},experience:{type:Object,required:!0}},data(){return{no_cliente:"",no_cliente_nsc:"",nu_telefone:"",ds_experiencia:"",dt_experiencia:null,qt_estrelas:"",showInputPhoneError:!1,cm_etiquetas:[]}},computed:r()({},Object(c["d"])({etiquetas:e=>e.acompanhantes.etiquetas})),watch:{etiquetas(){if(this.etiquetas.length>0){let e=[];this.etiquetas.forEach((t=>{let i=r()({},t);i.value=!1,e.push(i)})),this.cm_etiquetas=e}},no_cliente(){let e=this.no_cliente;e=e.normalize("NFD").replace(/[\u0300-\u036f]/g,""),this.no_cliente_nsc=e.toLowerCase()}},methods:r()(r()({},Object(c["b"])({updateExperienceAction:"experiencias/updateExperience"})),{},{updateExperience(){let e=this.validateInputPhone();if(e){let e=this.cm_etiquetas.filter((e=>e.value)).map((e=>e.id)),t=this.dt_experiencia.split("/"),i=new Date(t[2],t[1]-1,t[0]),n=Object.keys(this.experience).every(((t,i)=>{if(["dh_inclusao","id_acompanhante","is_excluido","id_experiencia"].includes(t))return!0;if(this[t]===this.experience[t])return!0;if("cm_etiquetas"===t){let t=e.every(((t,i)=>{let n=Object.keys(t);if(e.length!==this.experience.cm_etiquetas.length)return!1;{let e=n.every((e=>this.experience.cm_etiquetas[i]&&this.experience.cm_etiquetas[i][e]==t[e]));return e}}));return t}if("dt_experiencia"===t){let e=this.dt_experiencia.split("/"),t=new Date(e[2],e[1],e[0]),i=this.experience.dt_experiencia.toDate?this.experience.dt_experiencia.toDate():this.experience.dt_experiencia;return JSON.stringify(t)==JSON.stringify(i)}return!1}));n?this.$q.notify({type:"warning",message:"Você deve alterar algum campo para poder enviar"}):this.experience.id_experiencia?this.updateExperienceAction({id_experiencia:this.experience.id_experiencia,no_cliente:this.no_cliente,no_cliente_nsc:this.no_cliente_nsc,nu_telefone:this.nu_telefone,ds_experiencia:this.ds_experiencia,dh_inclusao:this.experience.dh_inclusao,cm_etiquetas:e,dt_experiencia:i,qt_estrelas:this.qt_estrelas,is_excluido:!1}):this.updateExperienceAction({no_cliente:this.no_cliente,no_cliente_nsc:this.no_cliente_nsc,nu_telefone:this.nu_telefone,ds_experiencia:this.ds_experiencia,dh_inclusao:this.experience.dh_inclusao,cm_etiquetas:e,dt_experiencia:i,qt_estrelas:this.qt_estrelas,is_excluido:!1})}else this.$q.notify({type:"negative",message:"Você deve fornecer o telefone"})},getColor(e){return"n"==e.sg_tipo?"red":"green"},validateInputPhone(){return 0===this.nu_telefone.length?(this.showInputPhoneError=!0,!1):(this.showInputPhoneError=!1,!0)},setInfo(){this.no_cliente=this.experience.no_cliente,this.no_cliente_nsc=this.experience.no_cliente_nsc,this.nu_telefone=this.experience.nu_telefone,this.ds_experiencia=this.experience.ds_experiencia,this.qt_estrelas=this.experience.qt_estrelas;let e=this.experience.dt_experiencia.toDate?this.experience.dt_experiencia.toDate():this.experience.dt_experiencia,t=e.getDate()>=10?e.getDate():"0"+e.getDate(),i=e.getMonth()>10?e.getMonth()+1:"0"+(e.getMonth()+1),n=e.getFullYear(),a=`${t}/${i}/${n}`;this.dt_experiencia=a,this.cm_etiquetas.forEach((e=>{e.value=!1})),this.experience.cm_etiquetas.forEach((e=>{this.cm_etiquetas.forEach((t=>{t.id==e&&(t.value=!0)}))}))}}),mounted(){this.setInfo()},created(){if(this.etiquetas.length>0){let e=[];this.etiquetas.forEach((t=>{let i=r()({},t);i.value=!1,this.experience.cm_etiquetas.forEach((e=>{e==i.id&&(i.value=!0)})),e.push(i)})),this.cm_etiquetas=e}}},l=o,p=(i("924b"),i("2877")),u=i("24e8"),d=i("f09f"),h=i("0378"),_=i("a370"),x=i("27f9"),f=i("0016"),m=i("7cbe"),q=i("52ee"),v=i("9c40"),g=i("9564"),b=i("daf4"),y=i("eb85"),w=i("4b7e"),C=i("7f67"),k=i("eebe"),D=i.n(k),E=Object(p["a"])(l,n,a,!1,null,"4a26d6c9",null);t["default"]=E.exports;D()(E,"components",{QDialog:u["a"],QCard:d["a"],QForm:h["a"],QCardSection:_["a"],QInput:x["a"],QIcon:f["a"],QPopupProxy:m["a"],QDate:q["a"],QBtn:v["a"],QToggle:g["a"],QRating:b["a"],QSeparator:y["a"],QCardActions:w["a"]}),D()(E,"directives",{ClosePopup:C["a"]})},"5c61":function(e,t,i){},"924b":function(e,t,i){"use strict";i("5c61")}}]);