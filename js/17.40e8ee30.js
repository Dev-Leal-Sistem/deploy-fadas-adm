(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[17],{7286:function(e,t,a){},c10e:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-dialog",{attrs:{value:e.isOpen,persistent:""},on:{hide:function(t){return e.closeDialog()}}},[a("q-card",[a("q-card-section",[a("div",{staticClass:"text-h6"},[e._v("Adicione o novo depoimento")])]),a("q-scroll-area",{staticStyle:{height:"55vh","max-height":"600px","max-width":"500px",width:"calc(90vw - 40px)"}},[a("q-card-section",{staticClass:"q-pt-none scroll"},[a("q-form",{on:{submit:function(t){return t.preventDefault(),t.stopPropagation(),e.addExperience(t)}}},[a("div",{staticClass:"row q-col-gutter-sm"},[a("div",{staticClass:"col-12"},[a("q-input",{attrs:{color:"purple",label:"Nome",filled:"",rules:[function(e){return 0!==e.length||"Nome é obrigatório"}]},model:{value:e.no_cliente,callback:function(t){e.no_cliente=t},expression:"no_cliente"}})],1),a("div",{staticClass:"col-12"},[a("vue-tel-input",{attrs:{mode:"international",defaultCountry:"br",validCharactersOnly:!0,styleClasses:["wrapper",{"wrapper--dark":this.$q.dark.isActive},{"vti__dropdown-list--dark":this.$q.dark.isActive}],inputOptions:{placeholder:"Digite seu número de telefone",maxlength:20,required:!1,type:"tel"}},model:{value:e.nu_telefone,callback:function(t){e.nu_telefone=t},expression:"nu_telefone"}}),a("span",{staticClass:"errorLabel",class:{errorInputPhone:e.showInputPhoneError}},[e._v("\n                Campo obrigatório\n              ")])],1),a("div",{staticClass:"col-12"},[a("q-input",{attrs:{color:"purple",label:"menssagem",maxlength:"500",filled:"",autogrow:"",rules:[function(e){return 0!==e.length||"Nome é obrigatório"}]},model:{value:e.ds_experiencia,callback:function(t){e.ds_experiencia=t},expression:"ds_experiencia"}})],1),a("div",{staticClass:"col-12"},[a("q-input",{attrs:{filled:"",readonly:"",color:"purple",label:"Selecione a data da experiência",rules:[function(e){return!!e||"Campo obrigatório"}]},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}})]},proxy:!0}]),model:{value:e.dt_experiencia,callback:function(t){e.dt_experiencia=t},expression:"dt_experiencia"}},[a("q-popup-proxy",{ref:"qDateProxy",attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-date",{attrs:{color:"purple",mask:"DD/MM/YYYY"},model:{value:e.dt_experiencia,callback:function(t){e.dt_experiencia=t},expression:"dt_experiencia"}},[a("div",{staticClass:"row items-center justify-end"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Fechar",color:"purple",flat:""}})],1)])],1)],1)],1),a("div",{staticClass:"col-12"},e._l(e.cm_etiquetas,(function(t,i){return a("q-toggle",{key:i,attrs:{label:t.br,color:e.getColor(t.sg_tipo)},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"etiqueta.value"}})})),1),a("div",{staticClass:"col-12"},[a("q-rating",{attrs:{size:"2em",max:5,color:"yellow-9"},model:{value:e.qt_estrelas,callback:function(t){e.qt_estrelas=t},expression:"qt_estrelas"}})],1),a("div",{staticClass:"col-12 row"},[a("q-btn",{staticClass:"col-12 q-mt-md",attrs:{label:"adicionar",color:"purple",type:"submit"}})],1)])])],1)],1),a("q-separator"),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Fechar",color:"red"}})],1)],1)],1)},n=[],s=a("ded3"),r=a.n(s),o=(a("5319"),a("2f62")),l={props:{isOpen:{type:Boolean,required:!0},currentPage:{type:Number,required:!0}},data(){return{no_cliente:"",no_cliente_nsc:"",nu_telefone:"",ds_experiencia:"",dt_experiencia:null,qt_estrelas:0,cm_etiquetas:[],showInputPhoneError:!1}},watch:{xpEtiquetas(){if(this.xpEtiquetas.length>0){let e=[];this.xpEtiquetas.forEach((t=>{let a=r()({},t);a.value=!1,e.push(a)})),this.cm_etiquetas=e}},no_cliente(){let e=this.no_cliente;e=e.normalize("NFD").replace(/[\u0300-\u036f]/g,""),this.no_cliente_nsc=e.toLowerCase()}},computed:r()({},Object(o["d"])({totalPages:e=>e.experiencias.totalPages,experiencesLength:e=>e.experiencias.experiences.length,totalExperiences:e=>e.experiencias.totalExperiences,xpEtiquetas:e=>e.acompanhantes.etiquetas,valuesFiltered:e=>e.experiencias.valuesFiltered})),methods:r()(r()({},Object(o["b"])({addExperienceAction:"experiencias/addExperience",getExperiences:"experiencias/getExperiences"})),{},{validateInputPhone(){return 0===this.nu_telefone.length?(this.showInputPhoneError=!0,!1):(this.showInputPhoneError=!1,!0)},closeDialog(){this.$emit("closePopup",!1)},getColor(e){return"n"===e?"red":"green"},addExperience(){console.log(this.currentPage);let e=this.validateInputPhone();if(e&&0!=this.qt_estrelas){console.log(this.cm_etiquetas);let e=this.cm_etiquetas.filter((e=>e.value)).map((e=>e.id)),t=this.dt_experiencia.split("/"),a=Number(t[0]),i=Number(t[1]-1),n=Number(t[2]),s=new Date(n,i,a),r=!1;this.currentPage==this.totalPages&&(r=!0),this.$emit("changePage",1),this.getExperiences({page:"MyExperiences"}),this.addExperienceAction({experience:{no_cliente:this.no_cliente,no_cliente_nsc:this.no_cliente_nsc,nu_telefone:this.nu_telefone,ds_experiencia:this.ds_experiencia,dh_inclusao:new Date,cm_etiquetas:e,dt_experiencia:s,qt_estrelas:this.qt_estrelas,is_excluido:!1},info:{currentPage:this.currentPage}}),this.closeDialog()}else this.$q.notify({type:"negative",message:"Você deve fornecer a quantidade de estrelas e o telefone"})}}),created(){if(this.xpEtiquetas.length>0){let e=[];this.xpEtiquetas.forEach((t=>{let a=r()({},t);a.value=!1,e.push(a)})),this.cm_etiquetas=e}}},c=l,p=(a("e1a6"),a("2877")),u=a("24e8"),d=a("f09f"),h=a("a370"),x=a("4983"),_=a("0378"),m=a("27f9"),f=a("0016"),g=a("7cbe"),q=a("52ee"),v=a("9c40"),b=a("9564"),w=a("daf4"),C=a("eb85"),E=a("4b7e"),P=a("7f67"),y=a("eebe"),k=a.n(y),Q=Object(p["a"])(c,i,n,!1,null,"0c788637",null);t["default"]=Q.exports;k()(Q,"components",{QDialog:u["a"],QCard:d["a"],QCardSection:h["a"],QScrollArea:x["a"],QForm:_["a"],QInput:m["a"],QIcon:f["a"],QPopupProxy:g["a"],QDate:q["a"],QBtn:v["a"],QToggle:b["a"],QRating:w["a"],QSeparator:C["a"],QCardActions:E["a"]}),k()(Q,"directives",{ClosePopup:P["a"]})},e1a6:function(e,t,a){"use strict";a("7286")}}]);