(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[28],{"4d47":function(e,t,o){"use strict";o.r(t);var i=function(){var e=this,t=this,o=t.$createElement,i=t._self._c||o;return i("div",{staticClass:"q-px-md"},[i("div",{staticClass:"rounded-borders q-px-sm q-mt-sm q-mx-auto bg-grey-3 row justify-between items-center",class:{"bg-grey-9":t.$q.dark.isActive},staticStyle:{"max-width":"1200px"}},[i("q-toggle",{attrs:{label:"Reordenar","left-label":"",icon:t.dragOn?"drag_indicator":null,color:"purple"},model:{value:t.dragOn,callback:function(e){t.dragOn=e},expression:"dragOn"}}),t.dragOn?i("q-btn",{attrs:{label:"Salvar",color:"green",size:"sm"},on:{click:t.toOrderImages}}):t._e()],1),0===t.photosGirlsMonth.length?i("lottie-vue-player",{staticClass:"bg-grey-1",staticStyle:{height:"calc(100vh - 116px)"},attrs:{src:"https://assets6.lottiefiles.com/packages/lf20_olr9dg5b.json"}}):t._e(),i("q-scroll-area",{directives:[{name:"show",rawName:"v-show",value:0!==t.photosGirlsMonth.length,expression:"photosGirlsMonth.length !== 0"}],ref:"scrollarea",staticClass:"container-photos-girls rounded-borders relative-positon ",staticStyle:{"overflow-x":"hidden"},attrs:{horizontal:"","thumb-style":t.thumbStyle,"bar-style":t.barStyle,visible:!0}},[i("div",{staticClass:"row no-wrap",staticStyle:{height:"100%"}},[i("draggable",t._b({staticStyle:{height:"100%"},attrs:{disabled:!t.dragOn},on:{start:function(e){t.drag=!0},end:function(e){t.drag=!1}},model:{value:t.photosGirlsMonth,callback:function(e){t.photosGirlsMonth=e},expression:"photosGirlsMonth"}},"draggable",t.dragOptions,!1),[i("transition-group",{staticClass:"row no-wrap",staticStyle:{height:"100%"},attrs:{type:"transition",name:"flip-list"}},t._l(t.photosGirlsMonth,(function(e){return i("div",{key:e.id,staticClass:"relative-position"},[i("q-img",{ref:"img",refInFor:!0,attrs:{src:e.im_foto,"spinner-color":"purple",position:"center",width:t.imgWidth,height:"100%"}}),i("q-btn",{staticClass:"absolute-bottom-right q-mr-sm q-mb-sm",attrs:{label:"Excluir",color:"red"},on:{click:function(){t.imageToDelete=e,t.isOpenConfirmDelete=!0}}})],1)})),0)],1)],1)]),i("q-file",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"inputFileAvatar",attrs:{accept:".jpg, .jpeg,.webp, .png"},model:{value:t.file,callback:function(e){t.file=e},expression:"file"}}),i("DialogCrooper",{attrs:{isOpen:t.isOpenCrooper,file:this.file,ratio:6/16},on:{sendImage:function(e){return t.setPhotoGirlsMonthAction({image:e,nuSequencia:t.photosGirlsMonth.length})},hide:function(){e.isOpenCrooper=!1,e.isOpenImage=!1,e.file=null}}}),i("DialogConfirmDelete",{attrs:{isOpenOptions:t.isOpenConfirmDelete},on:{hideConfirmDelete:function(e){t.isOpenConfirmDelete=!1},deletePhoto:function(){t.isOpenConfirmDelete=!1,t.deletePhotoGirlsMonthAction({photoId:t.imageToDelete.id,imageUrl:t.imageToDelete.im_foto})}}}),i("q-page-sticky",{staticStyle:{"z-index":"2"},attrs:{position:"bottom-right",offset:[18,18]}},[i("q-btn",{attrs:{fab:"",icon:"add",color:"accent"},on:{click:function(e){return t.pickImage()}}})],1)],1)},s=[],r=o("ded3"),n=o.n(r),a=(o("ddb0"),o("e6cf"),o("5319"),o("a79d"),o("9149")),l=o("b76a"),d=o.n(l),h=o("2f62"),c={data(){return{drag:!1,dragOn:!1,isOpenCrooper:!1,isOpenConfirmDelete:!1,imageToDelete:!1,newOrder:[],file:null,isOpenDialog:!1,imgHeight:"",imgWidth:"",thumbStyle:{right:"4px",borderRadius:"5px",backgroundColor:"#9c27b0",width:"5px",opacity:.75},barStyle:{right:"2px",borderRadius:"9px",backgroundColor:"#9c27b0",width:"9px",opacity:.2}}},watch:{file(){this.file&&(this.isOpenCrooper=!0)}},computed:n()(n()({},Object(h["d"])({userUid:e=>e.acompanhantes.userId})),{},{photosGirlsMonth:{get(){return this.$store.state.fotosEvideos.photosGirlsMonth},set(e){this.newOrder=[],this.newOrder=[...e],this.updateOrderPhotosGirlsMonth(this.newOrder)}},dragOptions(){return{animation:200,group:"description",disabled:!1,ghostClass:"ghost"}}}),components:{draggable:d.a,DialogCrooper:()=>Promise.all([o.e(0),o.e(1)]).then(o.bind(null,"619d")),DialogConfirmDelete:()=>Promise.all([o.e(0),o.e(2)]).then(o.bind(null,"075c"))},methods:n()(n()(n()({},Object(h["b"])({setPhotoGirlsMonthAction:"fotosEvideos/setPhotoGirlsMonthAction",getPhotosGirlsMonthAction:"fotosEvideos/getPhotosGirsMonthAction",deletePhotoGirlsMonthAction:"fotosEvideos/deletePhotoGirlsMonthAction"})),Object(h["c"])({updateOrderPhotosGirlsMonth:"fotosEvideos/updateOrderPhotosGirlsMonth"})),{},{pickImage(){this.$refs.inputFileAvatar.pickFiles()},resizeImages(){if("/girlsofmonth"===this.$route.path){let e=this.$refs.scrollarea.$el,t=window.getComputedStyle(e),o=Number(t.height.replace("px","")),i=o/16*6+"px";this.imgWidth=`${i}`}},toOrderImages(){this.$firebase.firestore().collection("acompanhante").doc(this.userUid).collection("vip").orderBy("nu_sequencia").get().then((()=>{0!==this.newOrder.length?(this.$q.loading.show({spinner:a["a"],spinnerColor:"purple",message:"Reordenando as fotos"}),this.newOrder.forEach(((e,t)=>{this.$firebase.firestore().collection("acompanhante").doc(this.userUid).collection("garotames").doc(e.id).set({nu_sequencia:t},{merge:!0}).then((()=>{this.newOrder.length-1===t&&this.$q.notify({type:"positive",message:"Ordem alterada com sucesso"})})).catch((e=>{console.error(e),this.$q.notify({type:"negative",message:"Erro ao reordenar as fotos"})})).finally((()=>{this.newOrder.length-1===t&&this.$q.loading.hide()}))}))):this.$q.notify({type:"info",message:"altere a ordem para poder salvar"})}))}}),mounted(){this.getPhotosGirlsMonthAction(this.userUid);const e=this.$refs.scrollarea.$el,t=window.getComputedStyle(e),o=Number(t.height.replace("px","")),i=o/16*6+"px";this.imgWidth=`${i}`,window.addEventListener("resize",this.resizeImages)},beforeDestroy(){window.removeEventListener("resize",this.resizeImages)}},p=c,g=(o("99d8"),o("2877")),m=o("9564"),u=o("9c40"),f=o("4983"),b=o("068f"),w=o("7d53"),O=o("de5e"),v=o("8572"),y=o("eebe"),C=o.n(y),x=Object(g["a"])(p,i,s,!1,null,null,null);t["default"]=x.exports;C()(x,"components",{QToggle:m["a"],QBtn:u["a"],QScrollArea:f["a"],QImg:b["a"],QFile:w["a"],QPageSticky:O["a"],QField:v["a"]})},"99d8":function(e,t,o){"use strict";o("def4")},def4:function(e,t,o){}}]);