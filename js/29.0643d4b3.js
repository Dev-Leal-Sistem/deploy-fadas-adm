(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[29],{"4fd8":function(e,t,o){"use strict";o.r(t);var i=function(){var e=this,t=this,o=t.$createElement,i=t._self._c||o;return i("div",{staticClass:"q-px-md"},[i("div",{staticClass:"rounded-borders q-px-sm q-mt-sm q-mx-auto bg-grey-3 row justify-between items-center",class:{"bg-grey-9":t.$q.dark.isActive},staticStyle:{"max-width":"1200px"}},[i("q-toggle",{attrs:{label:"Reordenar","left-label":"",icon:t.dragOn?"drag_indicator":null,color:"purple"},model:{value:t.dragOn,callback:function(e){t.dragOn=e},expression:"dragOn"}}),t.dragOn?i("q-btn",{attrs:{label:"Salvar",color:"green",size:"sm"},on:{click:t.toOrderImages}}):t._e()],1),0===t.photosVip.length?i("lottie-vue-player",{staticClass:"bg-grey-1",staticStyle:{height:"calc(100vh - 116px)"},attrs:{src:"https://assets6.lottiefiles.com/packages/lf20_olr9dg5b.json"}}):t._e(),i("q-file",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"inputFileAvatar",attrs:{accept:".jpg, .jpeg,.webp, .png"},model:{value:t.file,callback:function(e){t.file=e},expression:"file"}}),0!==t.photosVip.length?i("q-scroll-area",{ref:"first",staticClass:"container-photos-vip rounded-borders relative-positon adjust-height-vip",attrs:{"thumb-style":t.thumbStyle,"bar-style":t.barStyle,visible:!0}},[i("draggable",t._b({attrs:{disabled:!t.dragOn},on:{start:function(e){t.drag=!0},end:function(e){t.drag=!1}},model:{value:t.photosVip,callback:function(e){t.photosVip=e},expression:"photosVip"}},"draggable",t.dragOptions,!1),[i("transition-group",{attrs:{type:"transition",name:"flip-list"}},t._l(t.photosVip,(function(e){return i("div",{key:e.nu_sequencia,staticClass:"relative-position"},[i("q-img",{staticStyle:{width:"100%"},attrs:{src:e.im_foto,"spinner-color":"purple",position:"center",ratio:3}}),i("q-btn",{staticClass:"absolute-top-right q-mt-sm q-mr-sm",attrs:{label:"Excluir",color:"red",icon:"delete"},on:{click:function(){t.imageToDelete=e,t.isOpenConfirmDelete=!0}}})],1)})),0)],1)],1):t._e(),i("q-page-sticky",{staticStyle:{"z-index":"2"},attrs:{position:"bottom-right",offset:[18,18]}},[i("q-btn",{attrs:{fab:"",icon:"add",color:"accent"},on:{click:t.pickImage}})],1),i("DialogCrooper",{attrs:{isOpen:t.isOpenCrooper,file:this.file,ratio:3},on:{sendImage:t.sendImageVip,hide:function(){e.isOpenCrooper=!1,e.isOpenImage=!1,e.file=null}}}),i("DialogConfirmDelete",{attrs:{isOpenOptions:t.isOpenConfirmDelete},on:{hideConfirmDelete:function(e){t.isOpenConfirmDelete=!1},deletePhoto:function(){t.isOpenConfirmDelete=!1,t.deletePhotoVipAction({photoId:t.imageToDelete.id,imageUrl:t.imageToDelete.im_foto})}}})],1)},s=[],r=o("ded3"),n=o.n(r),a=(o("ddb0"),o("e6cf"),o("a79d"),o("9149")),l=o("b76a"),p=o.n(l),c=o("2f62"),d={data(){return{dragOn:!1,file:null,isOpenCrooper:!1,isOpenConfirmDelete:!1,newOrder:[],imageToDelete:null,thumbStyle:{right:"4px",borderRadius:"5px",backgroundColor:"#9c27b0",width:"5px",opacity:.75},barStyle:{right:"2px",borderRadius:"9px",backgroundColor:"#9c27b0",width:"9px",opacity:.2}}},watch:{file(){this.file&&(console.log(this.file),this.isOpenCrooper=!0)}},computed:n()(n()({},Object(c["d"])({userUid:e=>e.acompanhantes.userId})),{},{photosVip:{get(){return this.$store.state.fotosEvideos.photosVip},set(e){this.newOrder=[],this.newOrder=[...e],this.updateOrderPhotosVip(this.newOrder)}},dragOptions(){return{animation:200,group:"description",disabled:!1,ghostClass:"ghost"}}}),components:{draggable:p.a,DialogCrooper:()=>Promise.all([o.e(0),o.e(1)]).then(o.bind(null,"619d")),DialogConfirmDelete:()=>Promise.all([o.e(0),o.e(2)]).then(o.bind(null,"075c"))},methods:n()(n()(n()({},Object(c["c"])({updateOrderPhotosVip:"fotosEvideos/updateOrderPhotosVip"})),Object(c["b"])({getPhotosVipAction:"fotosEvideos/getPhotosVipAction",setPhotoVipAction:"fotosEvideos/setPhotoVipAction",deletePhotoVipAction:"fotosEvideos/deletePhotoVipAction"})),{},{pickImage(){this.$refs.inputFileAvatar.pickFiles()},sendImageVip(e){this.setPhotoVipAction({image:e,nuSequencia:this.photosVip.length})},toOrderImages(){this.$firebase.firestore().collection("acompanhante").doc(this.userUid).collection("vip").orderBy("nu_sequencia").get().then((()=>{0!==this.newOrder.length?(this.$q.loading.show({spinner:a["a"],spinnerColor:"purple",message:"Reordenando as fotos"}),this.newOrder.forEach(((e,t)=>{this.$firebase.firestore().collection("acompanhante").doc(this.userUid).collection("vip").doc(e.id).set({nu_sequencia:t},{merge:!0}).then((()=>{this.newOrder.length-1===t&&this.$q.notify({type:"positive",message:"Ordem alterada com sucesso"})})).catch((e=>{console.error(e),this.$q.notify({type:"negative",message:"Erro ao reordenar as fotos"})})).finally((()=>{this.newOrder.length-1===t&&this.$q.loading.hide()}))}))):this.$q.notify({type:"info",message:"altere a ordem para poder salvar"})}))}}),mounted(){this.getPhotosVipAction(this.userUid)}},h=d,g=(o("5b7e"),o("2877")),u=o("9564"),f=o("9c40"),m=o("7d53"),b=o("4983"),O=o("068f"),v=o("de5e"),y=o("eebe"),w=o.n(y),q=Object(g["a"])(h,i,s,!1,null,"0e0f3a94",null);t["default"]=q.exports;w()(q,"components",{QToggle:u["a"],QBtn:f["a"],QFile:m["a"],QScrollArea:b["a"],QImg:O["a"],QPageSticky:v["a"]})},"5b7e":function(e,t,o){"use strict";o("764e")},"764e":function(e,t,o){}}]);